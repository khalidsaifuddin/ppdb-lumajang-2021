(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{455:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2);t(4);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?c(t,!0).forEach((function(a){b(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function p(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,a){return!a||"object"!==u(a)&&"function"!=typeof a?f(e):a}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,a){return(k=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function b(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var _=function(e){function a(){var e,t;d(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return b(f(t=h(this,(e=m(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{pengguna_id:JSON.parse(localStorage.getItem("user")).pengguna_id,administrator:1},sekolah:{rows:[],total:0}}),b(f(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),b(f(t),"componentDidMount",(function(){t.$f7.dialog.preloader(),t.props.getSekolah(t.state.routeParams).then((function(e){t.setState({sekolah:t.props.sekolah},(function(){t.$f7.dialog.close()}))}))})),b(f(t),"aktifkanSekolah",(function(e){t.$f7.dialog.confirm("Apakah Anda yakin ingin mengaktifkan sekolah ini?","Konfirmasi",(function(){t.setState({routeParams:g({},t.state.routeParams,{sekolah_id:e})},(function(){t.props.aktifkanSekolah(t.state.routeParams).then((function(e){e.payload.sukses?t.$f7router.navigate("/berandaSekolah/"):t.$f7.dialog.alert("Ada kesalahan pada sistem atau jaringan. Mohon coba kembali dalam beberapa saat","Peringatan")}))}))}))})),b(f(t),"hapusSekolah",(function(e){alert(e)})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&k(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kelolaSekolah",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kelola Sekolah")),r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"0",tabletWidth:"10",desktopWidth:"15"}),r.a.createElement(o.r,{width:"0",tabletWidth:"80",desktopWidth:"70"},r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{padding:"8px"}},r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"100",tabletWidth:"50",desktopWidth:"40"},r.a.createElement(o.k,{className:"bawahCiriBiru",raised:!0,fill:!0,onClick:function(){return e.$f7router.navigate("/formSekolah/")}},r.a.createElement("i",{className:"icon f7-icons",style:{fontSize:"20px"}},"plus_rectangle"),"Â  Tambah Sekolah Baru")),r.a.createElement(o.r,{width:"50"})))),this.state.sekolah.rows.map((function(a){return r.a.createElement(o.l,{className:1===a.aktif?"sekolahAktif":""},r.a.createElement(o.m,{style:{padding:"8px",paddingRight:"16px"}},r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"20",tabletWidth:"15",desktopWidth:"10",style:{overflow:"hidden"}},r.a.createElement("img",{src:"https://be.diskuis.id"+a.gambar_logo,className:"gambar_latar_kelola_sekolah"})),r.a.createElement(o.r,{width:"65",tabletWidth:"65",desktopWidth:"70"},r.a.createElement("h2",null,a.nama," ",a.npsn?r.a.createElement(r.a.Fragment,null,"(",a.npsn,")"):""),a.langganan_id&&r.a.createElement("div",{className:"hilangDiDesktop"},r.a.createElement(o.q,{text:"Premium",color:"orange",style:{color:"#ffffff"}},r.a.createElement("img",{slot:"media",src:"/static/icons/vip-round.png"}))),!a.langganan_id&&r.a.createElement("div",{className:"hilangDiDesktop"},r.a.createElement(o.q,{text:"Standar",color:"gray",style:{color:"#ffffff"}},r.a.createElement("img",{slot:"media",src:"/static/icons/free-round.png"}))),r.a.createElement("span",null,a.keterangan),r.a.createElement("br",null),1===a.aktif&&r.a.createElement(o.k,{onClick:function(){return e.aktifkanSekolah(a.sekolah_id)},small:!0,raised:!0,fill:!0,class:!0,className:"color-theme-green",style:{width:"150px",marginTop:"8px",fontSize:"10px",height:"20px"}},"Sekolah Aktif"),1!==a.aktif&&r.a.createElement(o.u,{onClick:function(){return e.aktifkanSekolah(a.sekolah_id)}},"Aktifkan Sekolah")),r.a.createElement(o.r,{width:"15",tabletWidth:"20",desktopWidth:"20",style:{textAlign:"right",fontSize:"12px"}},a.langganan_id&&r.a.createElement("div",{className:"hilangDiMobile"},r.a.createElement(o.q,{text:"Premium",color:"orange",style:{color:"#ffffff"}},r.a.createElement("img",{slot:"media",src:"/static/icons/vip-round.png"})),r.a.createElement("br",null)),!a.langganan_id&&r.a.createElement("div",{className:"hilangDiMobile"},r.a.createElement(o.q,{text:"Standar",color:"gray",style:{color:"#ffffff"}},r.a.createElement("img",{slot:"media",src:"/static/icons/free-round.png"})),r.a.createElement("br",null)),r.a.createElement(o.u,{href:"/formSekolah/"+a.sekolah_id},"Edit"),r.a.createElement("br",null),r.a.createElement(o.u,{onClick:function(){return e.hapusSekolah(a.sekolah_id)}},"Hapus")))))}))),r.a.createElement(o.r,{width:"0",tabletWidth:"10",desktopWidth:"15"})))}}])&&p(t.prototype,n),l&&p(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,aktifkanSekolah:s.ub},e)}))(_)},464:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2);t(129);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?c(t,!0).forEach((function(a){b(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function p(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,a){return!a||"object"!==u(a)&&"function"!=typeof a?f(e):a}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,a){return(k=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function b(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var _=function(e){function a(){var e,t,n;d(this,a);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return b(f(n=h(this,(e=m(a)).call.apply(e,[this].concat(o)))),"state",(b(t={error:null,loading:!1,routeParams:{}},"loading",!0),b(t,"undangan_sekolah",{rows:[],total:0}),b(t,"undangan_sekolah_record",{}),t)),b(f(n),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),b(f(n),"componentDidMount",(function(){n.setState({routeParams:g({},n.state.routeParams)},(function(){}))})),b(f(n),"copyCodeToClipboard",(function(){n.textArea.select(),document.execCommand("copy")})),b(f(n),"setStateValue",(function(e){return function(a){n.setState({routeParams:g({},n.state.routeParams,b({},e,a.currentTarget.value))},(function(){}))}})),b(f(n),"tampilkanSekolah",(function(){n.$f7.dialog.preloader(),n.props.getUndanganSekolah(n.state.routeParams).then((function(e){n.$f7.dialog.close(),n.setState(g({},n.state,{undangan_sekolah:n.props.undangan_sekolah,undangan_sekolah_record:n.props.undangan_sekolah.rows[0]}),(function(){n.state.undangan_sekolah.total<1&&n.$f7.dialog.alert("Sekolah tidak ditemukan! Silakan coba kembali menggunakan kode sekolah lain, atau pastikan kode sekolah yang diketikkan benar","Peringatan")}))}))})),b(f(n),"prosesGabungSekolah",(function(e,a){n.$f7.dialog.preloader(),n.setState({routeParamsSimpan:{pengguna_id:JSON.parse(localStorage.getItem("user")).pengguna_id,sekolah_id:e,jabatan_sekolah_id:a,undangan:"Y"}},(function(){n.props.simpanSekolahPengguna(n.state.routeParamsSimpan).then((function(e){if(n.$f7.dialog.close(),!e.payload.sukses)return"pengguna_sudah_terdaftar"===e.payload.pesan?(n.$f7.dialog.alert("Anda telah bergabung sebelumnya ke sekolah ini!","Peringatan"),!1):(n.$f7.dialog.alert("Ada kesalahan pada sistem atau jaringan. Silakan coba kembali dalam beberapa saat!","Peringatan"),!1);n.$f7.dialog.alert("Selamat bergabung!","Berhasil"),n.$f7router.navigate("/"+(1===parseInt(a)?"menuSekolahGuru":"menuSekolahSiswa")+"/"+n.state.routeParamsSimpan.sekolah_id)}))}))})),n}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&k(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"gabungSekolah",hideBarsOnScroll:!0},r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"0",tabletWidth:"15"}),r.a.createElement(o.r,{width:"100",tabletWidth:"70"},r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{textAlign:"center"}},r.a.createElement("img",{src:"/static/icons/sekolah.png",style:{width:"60%",maxWidth:"400px",marginBottom:"-50px"}}),r.a.createElement("h3",null,"Gabung Sekolah Sekarang!"),r.a.createElement("h4",null,"Masukkan kode undangan sekolah:"),r.a.createElement(o.v,null,r.a.createElement(o.w,{outline:!0,floatingLabel:!0,clearButton:!0,type:"text",placeholder:"Kode Sekolah",style:{width:"100%"},onChange:this.setStateValue("kode_sekolah")})),r.a.createElement("br",null),r.a.createElement(o.k,{className:"bawahCiriBiru cardBorder-20",raised:!0,large:!0,fill:!0,onClick:this.tampilkanSekolah},r.a.createElement("i",{className:"icon f7-icons",style:{fontSize:"30px"}},"person_badge_plus_fill"),"Â  Tampilkan Sekolah"))),this.state.undangan_sekolah.total>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.j,null,"Sekolah"),r.a.createElement(o.l,null,r.a.createElement(o.m,null,r.a.createElement("div",{style:{width:"100%",display:"inline-flex"}},r.a.createElement("div",{style:{width:"60px",border:"0px solid #ccc"}},r.a.createElement("img",{src:"https://be.diskuis.id"+this.state.undangan_sekolah_record.gambar_logo,style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px"}})),r.a.createElement("div",{style:{marginLeft:"16px"}},r.a.createElement("b",null,this.state.undangan_sekolah_record.nama," ",this.state.undangan_sekolah_record.npsn?r.a.createElement(r.a.Fragment,null,"(",this.state.undangan_sekolah_record.npsn,")"):r.a.createElement(r.a.Fragment,null)),r.a.createElement("br",null),r.a.createElement("div",{style:{marginBottom:"8px"}},this.state.undangan_sekolah_record.keterangan),"Anda diundang untuk bergabung sebagai ",r.a.createElement("b",null,this.state.undangan_sekolah_record.jabatan_sekolah)," oleh ",r.a.createElement("b",null,this.state.undangan_sekolah_record.nama_pengguna))),r.a.createElement("div",null,r.a.createElement(o.k,{raised:!0,fill:!0,className:"bawahCiriHijau color-theme-teal",style:{marginTop:"8px"},onClick:function(){return e.prosesGabungSekolah(e.state.undangan_sekolah_record.sekolah_id,e.state.undangan_sekolah_record.jabatan_sekolah_id)}},r.a.createElement("i",{className:"icons f7-icons",style:{fontSize:"20px"}},"paperplane"),"Â  Bergabung ke Sekolah")))))),r.a.createElement(o.r,{width:"0",tabletWidth:"15"})))}}])&&p(t.prototype,n),l&&p(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=(e.Kuis,e.Sekolah);return{window_dimension:a.window_dimension,loading:a.loading,undangan_sekolah:t.undangan_sekolah,sekolah_pengguna:t.sekolah_pengguna}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getUndanganSekolah:s.Rc,simpanSekolahPengguna:s.Sd,getSekolahPengguna:s.Hc},e)}))(_)},466:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u),g=t(222),d=t(223),p=t(221);t(24),t(35),t(36),t(37);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(t,!0).forEach((function(a){S(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function k(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,a){return!a||"object"!==h(a)&&"function"!=typeof a?w(e):a}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,a){return(E=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function S(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var v=function(e){function a(){var e,t;k(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(w(t=_(this,(e=y(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null,tanggal:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_guru_total:0,kehadiran_guru_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},pengaturan_sekolah:{radius_absen_aktif:1,radius_absen_sekolah_guru:1e3}}),S(w(t),"formatAngka",(function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")})),S(w(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),S(w(t),"componentDidMount",(function(){t.$f7.dialog.preloader(),setInterval((function(){t.setState({sekarang:c()().format("D")+" "+t.bulan[c()().format("M")-1]+" "+c()().format("YYYY"),sekarang_pukul:c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss")})}),1e3),t.props.getSekolahPengguna(t.state.routeParams).then((function(e){t.setState({sekolah_pengguna:t.props.sekolah_pengguna,sekolah_pengguna_record:t.props.sekolah_pengguna.rows[0]})})),t.props.getKehadiranGuru(t.state.routeParams).then((function(e){console.log(t.props.kehadiran_guru),t.$f7.dialog.close(),t.props.kehadiran_guru.total>0&&t.setState({kehadiran_guru_record:t.props.kehadiran_guru.rows[0],kehadiran_guru_total:t.props.kehadiran_guru.total})})),"geolocation"in navigator?(console.log("geolocation Available"),navigator.geolocation.getCurrentPosition((function(e){console.log("Latitude is :",e.coords.latitude),console.log("Longitude is :",e.coords.longitude),t.setState({geolocation:!0,lintang:e.coords.latitude,bujur:e.coords.longitude},(function(){t.props.getJarakSekolah({lintang:e.coords.latitude,bujur:e.coords.longitude,pengguna_id:t.$f7route.params.pengguna_id,sekolah_id:t.$f7route.params.sekolah_id}).then((function(e){t.props.getPengaturanSekolah({sekolah_id:t.$f7route.params.sekolah_id}).then((function(e){t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]})}))}))}))}),(function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation."),t.setState({geolocation:!1,geolocation_error:"blocked"});break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable."),t.setState({geolocation:!1,geolocation_error:"unavailable"});break;case e.TIMEOUT:console.log("The request to get user location timed out."),t.setState({geolocation:!1,geolocation_error:"timeout"});break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred."),t.setState({geolocation:!1,geolocation_error:"unknown"})}}))):console.log("geolocation Not Available")})),S(w(t),"catatKehadiran",(function(e){"hadir"===e?(t.$f7.dialog.preloader(),t.setState({kehadiran_guru_record:f({},t.state.kehadiran_guru_record,{media_input_kehadiran_id:"web"===localStorage.getItem("device")?1:2,tanggal:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),waktu_datang:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")+" "+c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss"),waktu_pulang:null,keterangan:"-",lintang:t.state.lintang,bujur:t.state.bujur,jenis_kehadiran_id:1})},(function(){console.log(t.state.kehadiran_guru_record),t.props.simpanKehadiranGuru(t.state.kehadiran_guru_record).then((function(e){if(!e.payload.sukses)return t.$f7.dialog.alert("Terjadi kesalahan pada sistem atau jaringan. Mohon coba kembali dalam beberapa saat","Peringatan"),!1;t.$f7.dialog.close(),t.$f7.dialog.alert("Selamat bekerja!","Berhasil menyimpan kehadiran!"),t.props.getKehadiranGuru(t.state.routeParams).then((function(e){t.setState({kehadiran_guru_record:t.props.kehadiran_guru.rows[0],kehadiran_guru_total:t.props.kehadiran_guru.total})}))}))}))):t.$f7.dialog.confirm("Anda yakin akan mencatat waktu pulang sekarang? Proses ini tidak dapat dibatalkan atau diulangi!","Konfirmasi",(function(){t.$f7.dialog.preloader(),t.setState({kehadiran_guru_record:f({},t.state.kehadiran_guru_record,{waktu_pulang:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")+" "+c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss")})},(function(){t.props.simpanKehadiranGuru(t.state.kehadiran_guru_record).then((function(e){if(!e.payload.sukses)return t.$f7.dialog.alert("Terjadi kesalahan pada sistem atau jaringan. Mohon coba kembali dalam beberapa saat","Peringatan"),!1;t.$f7.dialog.close(),t.$f7.dialog.alert("Selamat beristirahat! Sampai jumpa esok hari!","Berhasil menyimpan waktu pulang!"),t.props.getKehadiranGuru(t.state.routeParams).then((function(e){t.setState({kehadiran_guru_record:t.props.kehadiran_guru.rows[0],kehadiran_guru_total:t.props.kehadiran_guru.total})}))}))}))}))})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&E(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranGuru",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kehadiran Guru")),r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"0",tabletWidth:"15"}),r.a.createElement(o.r,{width:"100",tabletWidth:"70"},r.a.createElement("div",{style:{textAlign:"center",width:"100%"}},r.a.createElement(o.l,null,r.a.createElement(o.m,null,r.a.createElement("h2",null,this.state.sekarang,", ",this.state.sekarang_pukul),r.a.createElement("div",{style:{fontSize:"20px",color:"#007AFF",fontWeight:"bold",marginTop:"16px"}},this.state.sekolah_pengguna_record.nama_sekolah),this.state.kehadiran_guru_record.waktu_datang&&r.a.createElement("div",{style:{fontSize:"15px",color:"teal",fontWeight:"normal",marginTop:"16px"}},"Waktu Hadir: ",c()(this.state.kehadiran_guru_record.waktu_datang).format("H")+":"+c()(this.state.kehadiran_guru_record.waktu_datang).format("mm")+":"+c()(this.state.kehadiran_guru_record.waktu_datang).format("ss")),this.state.kehadiran_guru_record.waktu_pulang&&r.a.createElement("div",{style:{fontSize:"15px",color:"teal",fontWeight:"normal",marginTop:"0px"}},"Waktu Pulang: ",c()(this.state.kehadiran_guru_record.waktu_pulang).format("H")+":"+c()(this.state.kehadiran_guru_record.waktu_pulang).format("mm")+":"+c()(this.state.kehadiran_guru_record.waktu_pulang).format("ss")),this.state.pengaturan_sekolah&&r.a.createElement(o.k,{disabled:this.state.pengaturan_sekolah&&1!==parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)?!!this.state.kehadiran_guru_record.waktu_pulang:!(parseFloat(this.props.jarak_sekolah.m)<=parseFloat(this.state.pengaturan_sekolah.radius_absen_sekolah_guru)&&!this.state.kehadiran_guru_record.waktu_pulang),raised:!0,fill:!0,large:!0,className:this.state.kehadiran_guru_total>0?"button-absen color-theme-teal bawahCiriHijau":"button-absen color-theme-red bawahCiri",onClick:function(){return e.catatKehadiran(e.state.kehadiran_guru_total>0?"pulang":"hadir")}},r.a.createElement("img",{src:localStorage.getItem("api_base")+"/assets/img/125503_white.png",style:{height:"70px"}}),r.a.createElement("br",null),r.a.createElement("div",null,this.state.kehadiran_guru_total>0?this.state.kehadiran_guru_record.waktu_pulang?"-":"Pulang":"Hadir")),!this.state.pengaturan_sekolah&&r.a.createElement(o.k,{disabled:!!this.state.kehadiran_guru_record.waktu_pulang,raised:!0,fill:!0,large:!0,className:this.state.kehadiran_guru_total>0?"button-absen color-theme-teal bawahCiriHijau":"button-absen color-theme-red bawahCiri",onClick:function(){return e.catatKehadiran(e.state.kehadiran_guru_total>0?"pulang":"hadir")}},r.a.createElement("img",{src:localStorage.getItem("api_base")+"/assets/img/125503_white.png",style:{height:"70px"}}),r.a.createElement("br",null),r.a.createElement("div",null,this.state.kehadiran_guru_total>0?this.state.kehadiran_guru_record.waktu_pulang?"-":"Pulang":"Hadir")),r.a.createElement("br",null),r.a.createElement(o.j,{style:{marginTop:"16px"}},"Lokasi Anda Saat ini"),this.state.pengaturan_sekolah&&1===parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)&&r.a.createElement(o.l,null,r.a.createElement(o.m,null,"Jarak dari sekolah:",r.a.createElement("div",{style:{fontSize:"25px"}},r.a.createElement("b",null,this.formatAngka(parseFloat(this.props.jarak_sekolah.km).toFixed(2))," km"),r.a.createElement("br",null),r.a.createElement("div",{style:{fontSize:"15px",marginTop:"0px"}},"(",this.formatAngka(parseFloat(this.props.jarak_sekolah.m).toFixed(0))," meter)"),this.state.pengaturan_sekolah&&1===parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)&&r.a.createElement(r.a.Fragment,null,parseFloat(this.props.jarak_sekolah.m)>parseFloat(this.state.pengaturan_sekolah.radius_absen_sekolah_guru)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{fontSize:"12px",color:"white",background:"#F44336"}},"Lokasi Anda saat ini terlalu jauh dari titik koordinat sekolah yang telah ditentukan. Mohon pindah ke tempat dalam radius ",r.a.createElement("b",null,this.formatAngka(this.state.pengaturan_sekolah.radius_absen_sekolah_guru))," meter dari titik koordinat sekolah!"))))))),r.a.createElement("div",{style:{border:"1px solid #ccc",width:"100%",height:"160px",marginTop:"8px",borderRadius:"20px",overflow:"hidden"}},r.a.createElement(g.a,{style:{height:"160px",width:"100%",cursor:"pointer"},center:[this.state.lintang,this.state.bujur],zoom:this.state.zoom},r.a.createElement(d.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}),r.a.createElement(p.a,{position:[this.state.lintang,this.state.bujur]}))))))),r.a.createElement(o.r,{width:"0",tabletWidth:"15"})))}}])&&b(t.prototype,n),l&&b(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_guru:n.kehadiran_guru,jarak_sekolah:t.jarak_sekolah,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,getKehadiranGuru:s.Pb,simpanKehadiranGuru:s.sd,getJarakSekolah:s.Ib,getPengaturanSekolah:s.ic},e)}))(v)},468:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u);t(24),t(35),t(36),t(37);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){y(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,a){return!a||"object"!==g(a)&&"function"!=typeof a?b(e):a}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,a){return(_=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var w=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(b(t=f(this,(e=k(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},routeParamsSekolah:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_guru_total:0,kehadiran_guru_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},sekolah:{},tanggal_hari_ini:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),arrBulanGabungan:[],arrMinggu:[],bulan:parseInt(c()().month())+1,tahun:c()().year(),pengaturan_sekolah:{}}),y(b(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),y(b(t),"hari",["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"]),y(b(t),"days",["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),y(b(t),"loadData",(function(){t.$f7.dialog.preloader(),console.log(t.state.tanggal_hari_ini),t.setState({routeParams:p({},t.state.routeParams,{bulan:t.state.bulan,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year()),tahun:t.state.tahun})},(function(){console.log(parseInt(c()(t.state.tahun+"-"+t.state.bulan+"-01").isoWeekday())),console.log(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd")),console.log(t.days.indexOf(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd")));for(var e=[],a=0;a<=t.days.indexOf(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd"));a++)e.push(a);t.props.kehadiranHarianGuru(t.state.routeParams).then((function(a){var n=0,r=0;t.props.kehadiran_harian_guru.map((function(a){e.push(a),1===parseInt(t.state.pengaturan_sekolah["masuk_0"+a.urut_hari])?(a.persen?parseInt(a.total)/parseInt(a.total_guru)*100:0,a.sekolah_id&&0,a.total_guru&&a.total_guru,n++,a.waktu_datang&&r++):console.log("masuk_0"+a.urut_hari+" libur")}));for(var o=[],l=0;l<Math.ceil(e.length/7);l++){for(var i=[],s=7*parseInt(l);s<7*parseInt(l)+7;s++)i.push(e[s]);o.push(i)}t.setState({arrBulanGabungan:e,arrMinggu:o,jumlah_minggu:Math.ceil(e.length/7),hariKerja:n,hariKerjaMasuk:r,loading:!1},(function(){console.log(t.state.arrMinggu),console.log(t.state.hariKerja),t.$f7.dialog.close()}))}))}))})),y(b(t),"componentDidMount",(function(){t.props.getSekolah(t.state.routeParamsSekolah).then((function(e){t.setState({sekolah:t.props.sekolah.rows[0]},(function(){t.props.getPengaturanSekolah(t.state.routeParams).then((function(e){e.payload.total>0?t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]},(function(){t.loadData()})):t.$f7.dialog.alert("Rekap kehadiran Anda belum dapat ditampilkan karena sekolah Anda belum melakukan pengaturan kehadiran. Mohon hubungi administrator sekolah Anda untuk dapat menggunakan menu ini","Peringatan",(function(){t.$f7router.navigate("/sekolah/"+t.$f7route.params.sekolah_id)}))}))}))}))})),y(b(t),"daysInMonth",(function(e,a){return new Date(a,e,0).getDate()})),y(b(t),"prevMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan-1>0?t.state.bulan-1:12,tahun:t.state.bulan-1>0?t.state.tahun:parseInt(t.state.tahun)-1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"nextMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan+1<=12?t.state.bulan+1:1,tahun:t.state.bulan+1<=12?t.state.tahun:parseInt(t.state.tahun)+1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranHarianGuru",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kehadiran Harian Guru")),r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{display:"inline-flex",padding:"8px"},className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement("img",{src:"https://be.diskuis.id"+this.state.sekolah.gambar_logo,style:{width:"20px",height:"20px",marginRight:"0px",border:"1px solid #ccc",borderRadius:"10px"}}),"Â ",r.a.createElement("span",{style:{marginTop:"4px"}},this.state.sekolah.nama))),r.a.createElement(o.O,{style:{marginTop:"8px"}},r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.prevMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_left_square_fill"))),r.a.createElement(o.r,{width:"70"},r.a.createElement(o.j,{style:{marginTop:"8px",textAlign:"center"}},this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun)),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.nextMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_right_square_fill")))),r.a.createElement(o.l,{style:{margin:"0px",borderRadius:"0px"}},r.a.createElement(o.m,null,r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Minggu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Senin"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Selasa"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Rabu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Kamis"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Jumat"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Sabtu")))),r.a.createElement(o.l,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px",margin:"0px"}},r.a.createElement(o.m,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px"}},r.a.createElement("div",{style:{overflow:"hidden",borderRadius:"0px"}},this.state.arrMinggu.map((function(a){return r.a.createElement("div",{className:"kotakMinggu"},a.map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kotakHari",style:{background:a?1===parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?"white":"#FFEBEE":"white",border:a&&a.tanggal_bulan===e.state.tanggal_hari_ini?"1px solid teal":"1px solid #eeeeee"}},a&&a.tanggal_bulan?c()(a.tanggal_bulan).format("DD"):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),a?a.tanggal_bulan?1!==parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"10%"}},"Hari Libur")):r.a.createElement(r.a.Fragment,null,a?a.waktu_datang?r.a.createElement("i",{className:"icons f7-icons",style:{color:"teal"}},"checkmark_circle_fill"):a.tanggal_bulan&&a&&a.tanggal_bulan?7===parseInt(c()(a.tanggal_bulan).isoWeekday())||6===parseInt(c()(a.tanggal_bulan).isoWeekday())?r.a.createElement(r.a.Fragment,null):r.a.createElement("i",{className:"icons f7-icons",style:{color:"#eeeeee"}},"circle"):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),r.a.createElement("div",{style:{fontSize:"9px"}},a&&a.waktu_datang?c()(a.waktu_datang).format("H")+":"+c()(a.waktu_datang).format("mm"):r.a.createElement(r.a.Fragment,null)," -",a&&a.waktu_pulang?c()(a.waktu_pulang).format("H")+":"+c()(a.waktu_pulang).format("mm"):r.a.createElement(r.a.Fragment,null))):a.tanggal_bulan&&a&&a.tanggal_bulan?(0===parseInt(c()(a.tanggal_bulan).day())||parseInt(c()(a.tanggal_bulan).day()),r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null)))})))}))),r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Jumlah Kehadiran"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(this.state.hariKerjaMasuk))," / ",parseFloat(this.state.hariKerja),r.a.createElement("br",null),"hari kerja"))),r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Persentase"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(parseFloat(this.state.hariKerjaMasuk)/parseFloat(this.state.hariKerja)*100).toFixed(2)),"%")))))))}}])&&m(t.prototype,n),l&&m(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_harian_guru:n.kehadiran_harian_guru,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,kehadiranHarianGuru:s.Zc,getPengaturanSekolah:s.ic},e)}))(w)},469:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u);t(24),t(35),t(36),t(37);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){y(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,a){return!a||"object"!==g(a)&&"function"!=typeof a?b(e):a}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,a){return(_=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var w=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(b(t=f(this,(e=k(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_guru_total:0,kehadiran_guru_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah:{},tanggal_hari_ini:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),arrBulanGabungan:[],arrMinggu:[],bulan:parseInt(c()().month())+1,tahun:c()().year(),persen_bulanan:0,total_guru:0,pengaturan_sekolah:{}}),y(b(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),y(b(t),"hari",["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]),y(b(t),"loadData",(function(){t.$f7.dialog.preloader(),t.setState({routeParams:p({},t.state.routeParams,{bulan:t.state.bulan,tanggal_terakhir:2!==parseInt(t.state.bulan)?t.daysInMonth(parseInt(t.state.bulan),c()().year()):28,tahun:t.state.tahun})},(function(){for(var e=[],a=0;a<parseInt(c()(t.state.tahun+"-"+t.state.bulan+"-01").day());a++)e.push(a);t.props.kehadiranRekapGuru(t.state.routeParams).then((function(a){var n=0,r=0,o=0;console.log(t.props.kehadiran_rekap_guru),t.props.kehadiran_rekap_guru.map((function(a){e.push(a),1===parseInt(t.state.pengaturan_sekolah["masuk_0"+a.urut_hari])?(n+=a.persen?parseInt(a.total)/parseInt(a.total_guru)*100:0,a.sekolah_id&&r++,a.total_guru&&(o=a.total_guru)):console.log("masuk_0"+a.urut_hari+" libur")})),console.log(n),console.log(r);var l=n/r;console.log(l);for(var i=[],s=0;s<Math.ceil(e.length/7);s++){for(var u=[],c=7*parseInt(s);c<7*parseInt(s)+7;c++)u.push(e[c]);i.push(u)}t.setState({arrBulanGabungan:e,arrMinggu:i,jumlah_minggu:Math.ceil(e.length/7),loading:!1,persen_bulanan:l,total_guru:o},(function(){console.log(t.state.arrMinggu),console.log(t.state.hariKerja),t.$f7.dialog.close()}))}))}))})),y(b(t),"componentDidMount",(function(){console.log(t.state),t.props.getSekolah(t.state.routeParams).then((function(e){t.setState({sekolah:t.props.sekolah.rows[0]},(function(){t.props.getPengaturanSekolah(t.state.routeParams).then((function(e){e.payload.total>0?t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]},(function(){t.loadData()})):t.$f7.dialog.alert("Sebelum membuka rekap kehadiran guru, mohon tentukan pengaturan kehadiran di pengaturan sekolah terlebih dahulu","Peringatan",(function(){t.$f7router.navigate("/pengaturanPengguna/"+JSON.parse(localStorage.getItem("user")).pengguna_id+"/"+t.$f7route.params.sekolah_id)}))}))}))}))})),y(b(t),"daysInMonth",(function(e,a){return new Date(a,e,0).getDate()})),y(b(t),"prevMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan-1>0?t.state.bulan-1:12,tahun:t.state.bulan-1>0?t.state.tahun:parseInt(t.state.tahun)-1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"nextMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan+1<=12?t.state.bulan+1:1,tahun:t.state.bulan+1<=12?t.state.tahun:parseInt(t.state.tahun)+1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"unduhLaporan",(function(e){window.open(localStorage.getItem("api_base")+"/api/Sekolah/unduhLaporanKehadiranGuru?sekolah_id="+t.$f7route.params.sekolah_id+"&bulan="+e+"&tahun="+t.state.tahun)})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranRekapGuru",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Rekap Kehadiran Harian Guru")),r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{display:"inline-flex",padding:"8px"},className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement("img",{src:"https://be.diskuis.id"+this.state.sekolah.gambar_logo,style:{width:"20px",marginRight:"0px",height:"20px",border:"1px solid #ccc",borderRadius:"10px"}}),"Â ",r.a.createElement("span",{style:{marginTop:"4px"}},this.state.sekolah.nama))),r.a.createElement(o.O,{style:{marginTop:"8px"}},r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.prevMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_left_square_fill"))),r.a.createElement(o.r,{width:"70"},r.a.createElement(o.j,{style:{marginTop:"8px",textAlign:"center"}},this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun)),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.nextMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_right_square_fill")))),r.a.createElement(o.l,{style:{margin:"0px",borderRadius:"0px"}},r.a.createElement(o.m,null,r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Minggu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Senin"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Selasa"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Rabu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Kamis"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Jumat"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Sabtu")))),r.a.createElement(o.l,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px",margin:"0px"}},r.a.createElement(o.m,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px"}},r.a.createElement("div",{style:{overflow:"hidden",borderRadius:"0px"}},this.state.arrMinggu.map((function(a){return r.a.createElement("div",{className:"kotakMinggu"},a.map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kotakHari",style:{background:a?1===parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?"white":"#FFEBEE":"white",border:a&&a.tanggal_bulan===e.state.tanggal_hari_ini?"1px solid teal":"1px solid #eeeeee"}},a&&a.tanggal_bulan?c()(a.tanggal_bulan).format("DD"):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),a?a.tanggal_bulan?1!==parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"40%"}},"Hari Libur")):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.s,{style:{padding:"8px"},type:"circle",value:a.total?a.total/parseFloat(a.total_guru):0,size:250,borderColor:"#2196f3",valueText:"".concat(parseFloat(100*(a.total?parseFloat(a.total)/parseFloat(a.total_guru):0)).toFixed(0),"%"),valueFontSize:80,valueTextColor:"#2196f3",labelFontWeight:800,labelFontSize:12,borderWidth:30}),a.total&&r.a.createElement("div",{style:{fontSize:"10px"}},a.total," dari ",a.total_guru," guru"),!a.total&&r.a.createElement("div",{style:{fontSize:"10px"}},"-")):a.tanggal_bulan&&a&&a.tanggal_bulan?(0===parseInt(c()(a.tanggal_bulan).day())||parseInt(c()(a.tanggal_bulan).day()),r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null)))})))}))),r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Persentase Kehadiran Rata-rata"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(this.state.persen_bulanan).toFixed(2)),"%",r.a.createElement("br",null),"dari total ",this.state.total_guru," guru"))),r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Laporan Kehadiran ",this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement(o.k,{raised:!0,fill:!0,className:"color-theme-teal bawahCiriHijau",onClick:function(){return e.unduhLaporan(parseInt(e.state.bulan))}},r.a.createElement("i",{className:"icons f7-icons",style:{fontSize:"20px"}},"cloud_download"),"Â  Unduh File Xls"))))))))}}])&&m(t.prototype,n),l&&m(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_rekap_guru:n.kehadiran_rekap_guru,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,kehadiranRekapGuru:s.bd,getPengaturanSekolah:s.ic},e)}))(w)},487:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){y(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,a){return!a||"object"!==g(a)&&"function"!=typeof a?b(e):a}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,a){return(_=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var w=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(b(t=f(this,(e=k(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{pengguna_id:JSON.parse(localStorage.getItem("user")).pengguna_id,sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,ruang_id:t.$f7route.params.ruang_id?t.$f7route.params.ruang_id:null,tahun_ajaran_id:t.$f7route.params.tahun_ajaran_id?t.$f7route.params.tahun_ajaran_id:2020},sekolah:{},ruang:{},kehadiran_ruang:{rows:[],total:0},tahun_ajaran:{},cekHadir:{}}),y(b(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),y(b(t),"hari",["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]),y(b(t),"componentDidMount",(function(){var e,a=new Date,n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear();e=t.hari[c()(a).day()]+", "+c()(a).format("D")+" "+t.bulan[c()(a).format("M")-1]+" "+c()(a).format("YYYY"),a=o+"-"+r+"-"+n,t.props.getSekolah(t.state.routeParams).then((function(n){t.setState({sekolah:n.payload.rows[0],today:a,hari_ini:e,routeParams:p({},t.state.routeParams,{tanggal:a})},(function(){t.props.getRuang(t.state.routeParams).then((function(e){t.setState({ruang:e.payload.rows[0]},(function(){t.props.getKehadiranRuang(t.state.routeParams).then((function(e){t.setState({kehadiran_ruang:e.payload},(function(){t.props.getTahunAjaran(t.state.routeParams).then((function(e){t.setState({tahun_ajaran:e.payload.rows[0]})}));var e={};t.state.kehadiran_ruang.rows.map((function(a){e[a.pengguna_id]={pengguna_id:a.pengguna_id,hadir:a.waktu_datang?"1":0,waktu_datang:a.waktu_datang,waktu_pulang:a.waktu_pulang,dirty:0}})),t.setState({cekHadir:e},(function(){console.log(t.state.cekHadir)}))}))}))}))}))}))}))})),y(b(t),"changeToggle",(function(e){return function(a){t.setState({cekHadir:p({},t.state.cekHadir,y({},e,p({},t.state.cekHadir[e],{hadir:a?"0":1,waktu_datang:a?null:t.state.cekHadir[e].waktu_datang,waktu_pulang:a?null:t.state.cekHadir[e].waktu_pulang,dirty:1})))},(function(){console.log(t.state.cekHadir)}))}})),y(b(t),"gantiWaktu",(function(e,a){return function(n){var r;t.setState({cekHadir:p({},t.state.cekHadir,y({},e,p({},t.state.cekHadir[e],(r={},y(r,a,t.state.today+" "+n.currentTarget.value),y(r,"dirty",1),r))))},(function(){console.log(t.state.cekHadir)}))}})),y(b(t),"simpanKehadiranRuang",(function(){t.$f7.dialog.preloader(),t.setState({routeParams:p({},t.state.routeParams,{data:t.state.cekHadir})},(function(){t.props.simpanKehadiranRuang(t.state.routeParams).then((function(e){t.props.getKehadiranRuang(t.state.routeParams).then((function(e){t.setState({kehadiran_ruang:e.payload},(function(){t.$f7.dialog.close(),t.$f7.dialog.alert("Berhasil Menyimpan Kehadiran!","Berhasil");var e={};t.state.kehadiran_ruang.rows.map((function(a){e[a.pengguna_id]={pengguna_id:a.pengguna_id,hadir:a.waktu_datang?"1":0,waktu_datang:a.waktu_datang,waktu_pulang:a.waktu_pulang,dirty:0}})),t.setState({cekHadir:e},(function(){console.log(t.state.cekHadir)}))}))}))}))}))})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranRuang",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kehadiran Siswa")),r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"0",tabletWidth:"10",desktopWidth:"15"}),r.a.createElement(o.r,{width:"100",tabletWidth:"80",desktopWidth:"70"},r.a.createElement(o.l,null,r.a.createElement(o.m,null,r.a.createElement("h1",{style:{marginTop:"0px",marginBottom:"0px"}},this.state.ruang.nama),r.a.createElement("h4",{style:{marginTop:"0px",marginBottom:"0px",color:"#636363"}},this.state.sekolah.nama),r.a.createElement(o.O,{noGap:!0,style:{borderTop:"1px solid #eee",marginTop:"8px",paddingTop:"8px"}},r.a.createElement(o.r,{width:"50",style:{textAlign:"left"}},r.a.createElement("b",null,this.state.tahun_ajaran.nama)),r.a.createElement(o.r,{width:"50",style:{textAlign:"right"}},this.state.hari_ini)),r.a.createElement("br",null),r.a.createElement(o.k,{raised:!0,fill:!0,className:"bawahCiriBiru",style:{display:"inline-flex"},onClick:this.simpanKehadiranRuang},r.a.createElement("i",{className:"icons f7-icons",style:{fontSize:"20px"}},"floppy_disk"),"Â  Simpan"))),r.a.createElement(o.l,null,r.a.createElement(o.m,{className:"card-padding-4"},r.a.createElement("br",null),this.state.kehadiran_ruang.rows.map((function(a){return r.a.createElement(o.l,{className:"card-side-0"},r.a.createElement(o.m,{className:"card-padding-8"},r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"15",tabletWidth:"10"},r.a.createElement("img",{src:a.gambar,style:{width:"60px",borderRadius:"50%",marginRight:"0px",border:"1px solid #eee",marginBottom:"-8px"}})),r.a.createElement(o.r,{width:"85",tabletWidth:"90",style:{paddingLeft:"8px"}},r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"100",tabletWidth:"40",style:{marginBottom:"8px"}},r.a.createElement("b",null,r.a.createElement(o.u,{href:"/tampilPengguna/"+a.pengguna_id},a.nama)),r.a.createElement("br",null),a.username),r.a.createElement(o.r,{width:"100",tabletWidth:"60"},r.a.createElement(o.l,{style:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},r.a.createElement(o.m,{style:{background:"#eeeeee",borderRadius:"20px"},className:"card-padding-8"},r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"30",style:{textAlign:"center",border:"0px solid #ccc"}},"Kehadiran",r.a.createElement("br",null),r.a.createElement(o.W,{checked:!!e.state.cekHadir[a.pengguna_id]&&1===parseInt(e.state.cekHadir[a.pengguna_id].hadir),value:1,onToggleChange:e.changeToggle(a.pengguna_id),style:{marginTop:"8px"}})),r.a.createElement(o.r,{width:"35",style:{textAlign:"center",border:"0px solid #ccc"}},"Datang",r.a.createElement("br",null),r.a.createElement(o.v,null,r.a.createElement(o.w,{type:"time",name:"waktu_datang",placeholder:"Waktu Datang...",style:{padding:"0px"},onChange:e.gantiWaktu(a.pengguna_id,"waktu_datang"),defaultValue:e.state.cekHadir[a.pengguna_id]&&e.state.cekHadir[a.pengguna_id].waktu_datang?e.state.cekHadir[a.pengguna_id].waktu_datang.substring(11,16):null}))),r.a.createElement(o.r,{width:"35",style:{textAlign:"center",border:"0px solid #ccc"}},"Pulang",r.a.createElement("br",null),r.a.createElement(o.v,null,r.a.createElement(o.w,{type:"time",name:"waktu_pulang",placeholder:"Waktu Pulang...",style:{padding:"0px"},onChange:e.gantiWaktu(a.pengguna_id,"waktu_pulang"),defaultValue:e.state.cekHadir[a.pengguna_id]&&e.state.cekHadir[a.pengguna_id].waktu_pulang?e.state.cekHadir[a.pengguna_id].waktu_pulang.substring(11,16):null}))))))))))))}))))),r.a.createElement(o.r,{width:"0",tabletWidth:"10",desktopWidth:"15"})))}}])&&m(t.prototype,n),l&&m(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App;return e.Sekolah,{window_dimension:a.window_dimension,loading:a.loading}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getRuang:s.Cc,getKehadiranRuang:s.Qb,simpanKehadiranRuang:s.td,getTahunAjaran:s.Oc},e)}))(w)},489:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u),g=t(222),d=t(223),p=t(221);t(24),t(35),t(36),t(37);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(t,!0).forEach((function(a){S(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function k(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,a){return!a||"object"!==h(a)&&"function"!=typeof a?w(e):a}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,a){return(E=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function S(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var v=function(e){function a(){var e,t;k(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(w(t=_(this,(e=y(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null,tanggal:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_siswa_total:0,kehadiran_siswa_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},pengaturan_sekolah:{radius_absen_aktif:1,radius_absen_sekolah_guru:1e3}}),S(w(t),"formatAngka",(function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")})),S(w(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),S(w(t),"componentDidMount",(function(){t.$f7.dialog.preloader(),setInterval((function(){t.setState({sekarang:c()().format("D")+" "+t.bulan[c()().format("M")-1]+" "+c()().format("YYYY"),sekarang_pukul:c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss")})}),1e3),t.props.getSekolahPengguna(t.state.routeParams).then((function(e){t.setState({sekolah_pengguna:t.props.sekolah_pengguna,sekolah_pengguna_record:t.props.sekolah_pengguna.rows[0]})})),t.props.getKehadiranSiswa(t.state.routeParams).then((function(e){console.log(t.props.kehadiran_siswa),t.$f7.dialog.close(),t.props.kehadiran_siswa.total>0&&t.setState({kehadiran_siswa_record:t.props.kehadiran_siswa.rows[0],kehadiran_siswa_total:t.props.kehadiran_siswa.total})})),"geolocation"in navigator?(console.log("geolocation Available"),navigator.geolocation.getCurrentPosition((function(e){console.log("Latitude is :",e.coords.latitude),console.log("Longitude is :",e.coords.longitude),t.setState({geolocation:!0,lintang:e.coords.latitude,bujur:e.coords.longitude},(function(){t.props.getJarakSekolah({lintang:e.coords.latitude,bujur:e.coords.longitude,pengguna_id:t.$f7route.params.pengguna_id,sekolah_id:t.$f7route.params.sekolah_id}).then((function(e){t.props.getPengaturanSekolah({sekolah_id:t.$f7route.params.sekolah_id}).then((function(e){t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]})}))}))}))}),(function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for Geolocation."),t.setState({geolocation:!1,geolocation_error:"blocked"});break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable."),t.setState({geolocation:!1,geolocation_error:"unavailable"});break;case e.TIMEOUT:console.log("The request to get user location timed out."),t.setState({geolocation:!1,geolocation_error:"timeout"});break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred."),t.setState({geolocation:!1,geolocation_error:"unknown"})}}))):console.log("geolocation Not Available")})),S(w(t),"catatKehadiran",(function(e){"hadir"===e?(t.$f7.dialog.preloader(),t.setState({kehadiran_siswa_record:f({},t.state.kehadiran_siswa_record,{media_input_kehadiran_id:"web"===localStorage.getItem("device")?1:2,tanggal:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),waktu_datang:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")+" "+c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss"),waktu_pulang:null,keterangan:"-",lintang:t.state.lintang,bujur:t.state.bujur,jenis_kehadiran_id:1})},(function(){console.log(t.state.kehadiran_siswa_record),t.props.simpanKehadiranSiswa(t.state.kehadiran_siswa_record).then((function(e){if(!e.payload.sukses)return t.$f7.dialog.alert("Terjadi kesalahan pada sistem atau jaringan. Mohon coba kembali dalam beberapa saat","Peringatan"),!1;t.$f7.dialog.close(),t.$f7.dialog.alert("Selamat Belajar!","Berhasil menyimpan kehadiran!"),t.props.getKehadiranSiswa(t.state.routeParams).then((function(e){t.setState({kehadiran_siswa_record:t.props.kehadiran_siswa.rows[0],kehadiran_siswa_total:t.props.kehadiran_siswa.total})}))}))}))):t.$f7.dialog.confirm("Anda yakin akan mencatat waktu pulang sekarang? Proses ini tidak dapat dibatalkan atau diulangi!","Konfirmasi",(function(){t.$f7.dialog.preloader(),t.setState({kehadiran_siswa_record:f({},t.state.kehadiran_siswa_record,{waktu_pulang:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD")+" "+c()().format("H")+":"+c()().format("mm")+":"+c()().format("ss")})},(function(){t.props.simpanKehadiranSiswa(t.state.kehadiran_siswa_record).then((function(e){if(!e.payload.sukses)return t.$f7.dialog.alert("Terjadi kesalahan pada sistem atau jaringan. Mohon coba kembali dalam beberapa saat","Peringatan"),!1;t.$f7.dialog.close(),t.$f7.dialog.alert("Selamat beristirahat! Sampai jumpa esok hari!","Berhasil menyimpan waktu pulang!"),t.props.getKehadiranSiswa(t.state.routeParams).then((function(e){t.setState({kehadiran_siswa_record:t.props.kehadiran_siswa.rows[0],kehadiran_siswa_total:t.props.kehadiran_siswa.total})}))}))}))}))})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&E(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranSiswa",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kehadiran Siswa")),r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"0",tabletWidth:"15"}),r.a.createElement(o.r,{width:"100",tabletWidth:"70"},r.a.createElement("div",{style:{textAlign:"center",width:"100%"}},r.a.createElement(o.l,null,r.a.createElement(o.m,null,r.a.createElement("h2",null,this.state.sekarang,", ",this.state.sekarang_pukul),r.a.createElement("div",{style:{fontSize:"20px",color:"#007AFF",fontWeight:"bold",marginTop:"16px"}},this.state.sekolah_pengguna_record.nama_sekolah),this.state.kehadiran_siswa_record.waktu_datang&&r.a.createElement("div",{style:{fontSize:"15px",color:"teal",fontWeight:"normal",marginTop:"16px"}},"Waktu Hadir: ",c()(this.state.kehadiran_siswa_record.waktu_datang).format("H")+":"+c()(this.state.kehadiran_siswa_record.waktu_datang).format("mm")+":"+c()(this.state.kehadiran_siswa_record.waktu_datang).format("ss")),this.state.kehadiran_siswa_record.waktu_pulang&&r.a.createElement("div",{style:{fontSize:"15px",color:"teal",fontWeight:"normal",marginTop:"0px"}},"Waktu Pulang: ",c()(this.state.kehadiran_siswa_record.waktu_pulang).format("H")+":"+c()(this.state.kehadiran_siswa_record.waktu_pulang).format("mm")+":"+c()(this.state.kehadiran_siswa_record.waktu_pulang).format("ss")),this.state.pengaturan_sekolah&&r.a.createElement(o.k,{disabled:this.state.pengaturan_sekolah&&1!==parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)?!!this.state.kehadiran_siswa_record.waktu_pulang:!(parseFloat(this.props.jarak_sekolah.m)<=parseFloat(this.state.pengaturan_sekolah.radius_absen_sekolah_guru)&&!this.state.kehadiran_siswa_record.waktu_pulang),raised:!0,fill:!0,large:!0,className:this.state.kehadiran_siswa_total>0?"button-absen color-theme-teal bawahCiriHijau":"button-absen color-theme-red bawahCiri",onClick:function(){return e.catatKehadiran(e.state.kehadiran_siswa_total>0?"pulang":"hadir")}},r.a.createElement("img",{src:localStorage.getItem("api_base")+"/assets/img/125503_white.png",style:{height:"70px"}}),r.a.createElement("br",null),r.a.createElement("div",null,this.state.kehadiran_siswa_total>0?this.state.kehadiran_siswa_record.waktu_pulang?"-":"Pulang":"Hadir")),!this.state.pengaturan_sekolah&&r.a.createElement(o.k,{disabled:!!this.state.kehadiran_siswa_record.waktu_pulang,raised:!0,fill:!0,large:!0,className:this.state.kehadiran_siswa_total>0?"button-absen color-theme-teal bawahCiriHijau":"button-absen color-theme-red bawahCiri",onClick:function(){return e.catatKehadiran(e.state.kehadiran_siswa_total>0?"pulang":"hadir")}},r.a.createElement("img",{src:localStorage.getItem("api_base")+"/assets/img/125503_white.png",style:{height:"70px"}}),r.a.createElement("br",null),r.a.createElement("div",null,this.state.kehadiran_siswa_total>0?this.state.kehadiran_siswa_record.waktu_pulang?"-":"Pulang":"Hadir")),r.a.createElement("br",null),r.a.createElement(o.j,{style:{marginTop:"16px"}},"Lokasi Anda Saat ini"),this.state.pengaturan_sekolah&&1===parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)&&r.a.createElement(o.l,null,r.a.createElement(o.m,null,"Jarak dari sekolah:",r.a.createElement("div",{style:{fontSize:"25px"}},r.a.createElement("b",null,this.formatAngka(parseFloat(this.props.jarak_sekolah.km).toFixed(2))," km"),r.a.createElement("br",null),r.a.createElement("div",{style:{fontSize:"15px",marginTop:"0px"}},"(",this.formatAngka(parseFloat(this.props.jarak_sekolah.m).toFixed(0))," meter)"),this.state.pengaturan_sekolah&&1===parseInt(this.state.pengaturan_sekolah.radius_absen_aktif)&&r.a.createElement(r.a.Fragment,null,parseFloat(this.props.jarak_sekolah.m)>parseFloat(this.state.pengaturan_sekolah.radius_absen_sekolah_guru)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{fontSize:"12px",color:"white",background:"#F44336"}},"Lokasi Anda saat ini terlalu jauh dari titik koordinat sekolah yang telah ditentukan. Mohon pindah ke tempat dalam radius ",r.a.createElement("b",null,this.formatAngka(this.state.pengaturan_sekolah.radius_absen_sekolah_guru))," meter dari titik koordinat sekolah!"))))))),r.a.createElement("div",{style:{border:"1px solid #ccc",width:"100%",height:"160px",marginTop:"8px",borderRadius:"20px",overflow:"hidden"}},r.a.createElement(g.a,{style:{height:"160px",width:"100%",cursor:"pointer"},center:[this.state.lintang,this.state.bujur],zoom:this.state.zoom},r.a.createElement(d.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}),r.a.createElement(p.a,{position:[this.state.lintang,this.state.bujur]}))))))),r.a.createElement(o.r,{width:"0",tabletWidth:"15"})))}}])&&b(t.prototype,n),l&&b(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_siswa:n.kehadiran_siswa,jarak_sekolah:t.jarak_sekolah,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,getKehadiranSiswa:s.Rb,simpanKehadiranSiswa:s.ud,getJarakSekolah:s.Ib,getPengaturanSekolah:s.ic},e)}))(v)},490:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u);t(24),t(35),t(36),t(37);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){y(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,a){return!a||"object"!==g(a)&&"function"!=typeof a?b(e):a}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,a){return(_=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var w=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(b(t=f(this,(e=k(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},routeParamsSekolah:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_siswa_total:0,kehadiran_siswa_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null,pengguna_id:t.$f7route.params.pengguna_id?t.$f7route.params.pengguna_id:null},sekolah:{},tanggal_hari_ini:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),arrBulanGabungan:[],arrMinggu:[],bulan:parseInt(c()().month())+1,tahun:c()().year()}),y(b(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),y(b(t),"hari",["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"]),y(b(t),"days",["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),y(b(t),"loadData",(function(){t.$f7.dialog.preloader(),console.log(t.state.tanggal_hari_ini),t.setState({routeParams:p({},t.state.routeParams,{bulan:t.state.bulan,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year()),tahun:t.state.tahun})},(function(){console.log(parseInt(c()(t.state.tahun+"-"+t.state.bulan+"-01").isoWeekday())),console.log(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd")),console.log(t.days.indexOf(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd")));for(var e=[],a=0;a<=t.days.indexOf(c()(t.state.tahun+"-"+t.state.bulan+"-01").format("dddd"));a++)e.push(a);t.props.kehadiranHarianSiswa(t.state.routeParams).then((function(a){var n=0,r=0;t.props.kehadiran_harian_siswa.map((function(a){e.push(a),1===parseInt(t.state.pengaturan_sekolah["masuk_0"+a.urut_hari])?(a.persen?parseInt(a.total)/parseInt(a.total_guru)*100:0,a.sekolah_id&&0,a.total_guru&&a.total_guru,n++,a.waktu_datang&&r++):console.log("masuk_0"+a.urut_hari+" libur")}));for(var o=[],l=0;l<Math.ceil(e.length/7);l++){for(var i=[],s=7*parseInt(l);s<7*parseInt(l)+7;s++)i.push(e[s]);o.push(i)}t.setState({arrBulanGabungan:e,arrMinggu:o,jumlah_minggu:Math.ceil(e.length/7),hariKerja:n,hariKerjaMasuk:r,loading:!1},(function(){console.log(t.state.arrMinggu),console.log(t.state.hariKerja),t.$f7.dialog.close()}))}))}))})),y(b(t),"componentDidMount",(function(){t.props.getSekolah(t.state.routeParamsSekolah).then((function(e){t.setState({sekolah:t.props.sekolah.rows[0]},(function(){t.props.getPengaturanSekolah(t.state.routeParams).then((function(e){t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]},(function(){t.loadData()}))}))}))}))})),y(b(t),"daysInMonth",(function(e,a){return new Date(a,e,0).getDate()})),y(b(t),"prevMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan-1>0?t.state.bulan-1:12,tahun:t.state.bulan-1>0?t.state.tahun:parseInt(t.state.tahun)-1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"nextMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan+1<=12?t.state.bulan+1:1,tahun:t.state.bulan+1<=12?t.state.tahun:parseInt(t.state.tahun)+1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranHarianSiswa",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Kehadiran Harian Siswa")),r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{display:"inline-flex",padding:"8px"},className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement("img",{src:"https://be.diskuis.id"+this.state.sekolah.gambar_logo,style:{width:"20px",height:"20px",marginRight:"0px",border:"1px solid #ccc",borderRadius:"10px"}}),"Â ",r.a.createElement("span",{style:{marginTop:"4px"}},this.state.sekolah.nama))),r.a.createElement(o.O,{style:{marginTop:"8px"}},r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.prevMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_left_square_fill"))),r.a.createElement(o.r,{width:"70"},r.a.createElement(o.j,{style:{marginTop:"8px",textAlign:"center"}},this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun)),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.nextMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_right_square_fill")))),r.a.createElement(o.l,{style:{margin:"0px",borderRadius:"0px"}},r.a.createElement(o.m,null,r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Minggu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Senin"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Selasa"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Rabu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Kamis"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Jumat"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Sabtu")))),r.a.createElement(o.l,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px",margin:"0px"}},r.a.createElement(o.m,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px"}},r.a.createElement("div",{style:{overflow:"hidden",borderRadius:"0px"}},this.state.arrMinggu.map((function(a){return r.a.createElement("div",{className:"kotakMinggu"},a.map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kotakHari",style:{background:a?1===parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?"white":"#FFEBEE":"white",border:a&&a.tanggal_bulan===e.state.tanggal_hari_ini?"1px solid teal":"1px solid #eeeeee"}},a&&a.tanggal_bulan?c()(a.tanggal_bulan).format("DD"):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),a?a.tanggal_bulan?1!==parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"10%"}},"Hari Libur")):r.a.createElement(r.a.Fragment,null,a?a.waktu_datang?r.a.createElement("i",{className:"icons f7-icons",style:{color:"teal"}},"checkmark_circle_fill"):a.tanggal_bulan&&a&&a.tanggal_bulan?7===parseInt(c()(a.tanggal_bulan).isoWeekday())||6===parseInt(c()(a.tanggal_bulan).isoWeekday())?r.a.createElement(r.a.Fragment,null):r.a.createElement("i",{className:"icons f7-icons",style:{color:"#eeeeee"}},"circle"):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),r.a.createElement("div",{style:{fontSize:"9px"}},a&&a.waktu_datang?c()(a.waktu_datang).format("H")+":"+c()(a.waktu_datang).format("mm"):r.a.createElement(r.a.Fragment,null)," -",a&&a.waktu_pulang?c()(a.waktu_pulang).format("H")+":"+c()(a.waktu_pulang).format("mm"):r.a.createElement(r.a.Fragment,null))):a.tanggal_bulan&&a&&a.tanggal_bulan?(0===parseInt(c()(a.tanggal_bulan).day())||parseInt(c()(a.tanggal_bulan).day()),r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null)))})))}))),r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Jumlah Kehadiran"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(this.state.hariKerjaMasuk))," / ",parseFloat(this.state.hariKerja),r.a.createElement("br",null),"hari kerja"))),r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Persentase"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(parseFloat(this.state.hariKerjaMasuk)/parseFloat(this.state.hariKerja)*100).toFixed(2)),"%")))))))}}])&&m(t.prototype,n),l&&m(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_harian_siswa:n.kehadiran_harian_siswa,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,kehadiranHarianSiswa:s.ad,getPengaturanSekolah:s.ic},e)}))(w)},491:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1),l=t(9),i=t(10),s=t(2),u=t(4),c=t.n(u);t(24),t(35),t(36),t(37);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){y(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function m(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,a){return!a||"object"!==g(a)&&"function"!=typeof a?b(e):a}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,a){return(_=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function y(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var w=function(e){function a(){var e,t;h(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(b(t=f(this,(e=k(a)).call.apply(e,[this].concat(r)))),"state",{error:null,loading:!0,loadingKuis:!0,routeParams:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah_pengguna:{rows:[],total:0},sekolah_pengguna_record:{},geolocation:!1,zoom:17,lintang:-8.109038,bujur:113.141552,kehadiran_siswa_total:0,kehadiran_siswa_record:{sekolah_id:t.$f7route.params.sekolah_id?t.$f7route.params.sekolah_id:null},sekolah:{},tanggal_hari_ini:c()().format("YYYY")+"-"+c()().format("MM")+"-"+c()().format("DD"),arrBulanGabungan:[],arrMinggu:[],bulan:parseInt(c()().month())+1,tahun:c()().year(),persen_bulanan:0,total_siswa:0,pengaturan_sekolah:{}}),y(b(t),"bulan",["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]),y(b(t),"hari",["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]),y(b(t),"loadData",(function(){t.$f7.dialog.preloader(),t.setState({routeParams:p({},t.state.routeParams,{bulan:t.state.bulan,tanggal_terakhir:2!==parseInt(t.state.bulan)?t.daysInMonth(parseInt(t.state.bulan),c()().year()):28,tahun:t.state.tahun})},(function(){for(var e=[],a=0;a<parseInt(c()(t.state.tahun+"-"+t.state.bulan+"-01").day());a++)e.push(a);t.props.kehadiranRekapSiswa(t.state.routeParams).then((function(a){var n=0,r=0,o=0;console.log(t.props.kehadiran_rekap_siswa),t.props.kehadiran_rekap_siswa.map((function(a){e.push(a),1===parseInt(t.state.pengaturan_sekolah["masuk_0"+a.urut_hari])?(n+=a.persen?parseInt(a.total)/parseInt(a.total_siswa)*100:0,a.sekolah_id&&r++,a.total_siswa&&(o=a.total_siswa)):console.log("masuk_0"+a.urut_hari+" libur")})),console.log(n),console.log(r);var l=n/r;console.log(l);for(var i=[],s=0;s<Math.ceil(e.length/7);s++){for(var u=[],c=7*parseInt(s);c<7*parseInt(s)+7;c++)u.push(e[c]);i.push(u)}t.setState({arrBulanGabungan:e,arrMinggu:i,jumlah_minggu:Math.ceil(e.length/7),loading:!1,persen_bulanan:l,total_siswa:o},(function(){console.log(t.state.arrMinggu),console.log(t.state.hariKerja),t.$f7.dialog.close()}))}))}))})),y(b(t),"componentDidMount",(function(){console.log(t.state),t.props.getSekolah(t.state.routeParams).then((function(e){t.setState({sekolah:t.props.sekolah.rows[0]},(function(){t.props.getPengaturanSekolah(t.state.routeParams).then((function(e){t.setState({pengaturan_sekolah:t.props.pengaturan_sekolah.rows[0]},(function(){t.loadData()}))}))}))}))})),y(b(t),"daysInMonth",(function(e,a){return new Date(a,e,0).getDate()})),y(b(t),"prevMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan-1>0?t.state.bulan-1:12,tahun:t.state.bulan-1>0?t.state.tahun:parseInt(t.state.tahun)-1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"nextMonth",(function(){t.setState(p({},t.state,{bulan:t.state.bulan+1<=12?t.state.bulan+1:1,tahun:t.state.bulan+1<=12?t.state.tahun:parseInt(t.state.tahun)+1,tanggal_terakhir:t.daysInMonth(parseInt(t.state.bulan),c()().year())}),(function(){t.loadData()}))})),y(b(t),"unduhLaporan",(function(e){window.open(localStorage.getItem("api_base")+"/api/Sekolah/unduhLaporanKehadiranSiswa?sekolah_id="+t.$f7route.params.sekolah_id+"&bulan="+e+"&tahun="+t.state.tahun)})),t}var t,n,l;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_(e,a)}(a,e),t=a,(n=[{key:"render",value:function(){var e=this;return r.a.createElement(o.F,{name:"kehadiranRekapSiswa",hideBarsOnScroll:!0},r.a.createElement(o.E,{sliding:!1,backLink:"Kembali",onBackClick:this.backClick},r.a.createElement(o.C,{sliding:!0},"Rekap Kehadiran Harian Siswa")),r.a.createElement(o.l,null,r.a.createElement(o.m,{style:{display:"inline-flex",padding:"8px"},className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement("img",{src:"https://be.diskuis.id"+this.state.sekolah.gambar_logo,style:{width:"20px",marginRight:"0px",height:"20px",border:"1px solid #ccc",borderRadius:"10px"}}),"Â ",r.a.createElement("span",{style:{marginTop:"4px"}},this.state.sekolah.nama))),r.a.createElement(o.O,{style:{marginTop:"8px"}},r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.prevMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_left_square_fill"))),r.a.createElement(o.r,{width:"70"},r.a.createElement(o.j,{style:{marginTop:"8px",textAlign:"center"}},this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun)),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},r.a.createElement(o.k,{onClick:this.nextMonth},r.a.createElement("i",{className:"icons f7-icons",style:{color:"#cccccc"}},"chevron_right_square_fill")))),r.a.createElement(o.l,{style:{margin:"0px",borderRadius:"0px"}},r.a.createElement(o.m,null,r.a.createElement(o.O,null,r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Minggu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Senin"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Selasa"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Rabu"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Kamis"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Jumat"),r.a.createElement(o.r,{width:"15",style:{textAlign:"center"}},"Sabtu")))),r.a.createElement(o.l,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px",margin:"0px"}},r.a.createElement(o.m,{style:{padding:"0px",overflow:"hidden",borderRadius:"0px"}},r.a.createElement("div",{style:{overflow:"hidden",borderRadius:"0px"}},this.state.arrMinggu.map((function(a){return r.a.createElement("div",{className:"kotakMinggu"},a.map((function(a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"kotakHari",style:{background:a?1===parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?"white":"#FFEBEE":"white",border:a&&a.tanggal_bulan===e.state.tanggal_hari_ini?"1px solid teal":"1px solid #eeeeee"}},a&&a.tanggal_bulan?c()(a.tanggal_bulan).format("DD"):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null),a?a.tanggal_bulan?1!==parseInt(e.state.pengaturan_sekolah["masuk_0"+(parseInt(c()(a.tanggal_bulan).day())+1)])?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"40%"}},"Hari Libur")):r.a.createElement(r.a.Fragment,null,r.a.createElement(o.s,{style:{padding:"8px"},type:"circle",value:a.total?a.total/parseFloat(a.total_siswa):0,size:250,borderColor:"#2196f3",valueText:"".concat(parseFloat(100*(a.total?parseFloat(a.total)/parseFloat(a.total_siswa):0)).toFixed(0),"%"),valueFontSize:80,valueTextColor:"#2196f3",labelFontWeight:800,labelFontSize:12,borderWidth:30}),a.total&&r.a.createElement("div",{style:{fontSize:"10px"}},a.total," dari ",a.total_siswa," siswa"),!a.total&&r.a.createElement("div",{style:{fontSize:"10px"}},"-")):a.tanggal_bulan&&a&&a.tanggal_bulan?(0===parseInt(c()(a.tanggal_bulan).day())||parseInt(c()(a.tanggal_bulan).day()),r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("br",null)))})))}))),r.a.createElement(o.O,{noGap:!0},r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Persentase Kehadiran Rata-rata"),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement("b",{style:{fontSize:"30px"}},parseFloat(this.state.persen_bulanan).toFixed(2)),"%",r.a.createElement("br",null),"dari total ",this.state.total_siswa," siswa"))),r.a.createElement(o.r,{width:"50"},r.a.createElement(o.l,{className:this.state.loading?"skeleton-text skeleton-effect-blink label-cell":""},r.a.createElement(o.o,null,"Laporan Kehadiran ",this.bulan[parseInt(this.state.bulan)-1]," ",this.state.tahun),r.a.createElement(o.m,{style:{minHeight:"65px"}},r.a.createElement(o.k,{raised:!0,fill:!0,className:"color-theme-teal bawahCiriHijau",onClick:function(){return e.unduhLaporan(parseInt(e.state.bulan))}},r.a.createElement("i",{className:"icons f7-icons",style:{fontSize:"20px"}},"cloud_download"),"Â  Unduh File Xls"))))))))}}])&&m(t.prototype,n),l&&m(t,l),a}(n.Component);a.a=Object(i.b)((function(e){var a=e.App,t=e.Sekolah,n=e.Guru;return{window_dimension:a.window_dimension,loading:a.loading,sekolah:t.sekolah,sekolah_pengguna:t.sekolah_pengguna,kehadiran_rekap_siswa:n.kehadiran_rekap_siswa,pengaturan_sekolah:t.pengaturan_sekolah}}),(function(e){return Object(l.b)({updateWindowDimension:s.Wd,setLoading:s.fd,getSekolah:s.Fc,getSekolahPengguna:s.Hc,simpanSekolahPengguna:s.Sd,kehadiranRekapSiswa:s.cd,getPengaturanSekolah:s.ic},e)}))(w)}}]);
//# sourceMappingURL=4.app.js.map